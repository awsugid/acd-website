---
import PortalLayout from "../../layouts/PortalLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).sort(
    (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<PortalLayout title="Blog - AWS User Group Indonesia">
    <main
        class="min-h-screen bg-slate-900 relative overflow-hidden pt-24 pb-12 px-4 sm:px-6 lg:px-8"
    >
        <!-- Background Elements -->
        <div class="absolute inset-0 bg-black/20"></div>
        <div
            class="absolute top-20 left-10 w-72 h-72 bg-gradient-to-r from-purple-400/10 to-pink-400/10 rounded-full blur-3xl"
        >
        </div>

        <div class="max-w-4xl mx-auto relative z-10">
            <h1
                class="text-4xl md:text-5xl font-bold text-white mb-4 tracking-tight"
            >
                Community <span
                    class="text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-pink-500"
                    >Blog</span
                >
            </h1>
            <p class="text-xl text-gray-400 mb-12 max-w-2xl">
                Insights, tutorials, and announcements from the AWS User Group
                Indonesia community.
            </p>

            <div class="grid gap-8">
                {
                    posts.map((post) => (
                        <article class="bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6 hover:bg-white/10 transition-all duration-300 group">
                            <a href={`/blog/${post.id}`}>
                                <div class="flex flex-col md:flex-row gap-6 items-start">
                                    <div class="flex-1">
                                        <div class="flex items-center gap-3 text-sm text-gray-400 mb-2">
                                            <time
                                                datetime={post.data.pubDate.toISOString()}
                                            >
                                                {post.data.pubDate.toLocaleDateString(
                                                    "en-US",
                                                    {
                                                        year: "numeric",
                                                        month: "long",
                                                        day: "numeric",
                                                    },
                                                )}
                                            </time>
                                            <span>â€¢</span>
                                            <span>{post.data.author}</span>
                                        </div>
                                        <h2 class="text-2xl font-bold text-white mb-3 group-hover:text-orange-400 transition-colors">
                                            {post.data.title}
                                        </h2>
                                        <p class="text-gray-300 mb-4 line-clamp-2">
                                            {post.data.description}
                                        </p>
                                        <div class="flex gap-2">
                                            {post.data.tags.map((tag) => (
                                                <span class="px-3 py-1 rounded-full bg-white/5 text-xs font-medium text-gray-300 border border-white/10">
                                                    #{tag}
                                                </span>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </article>
                    ))
                }
            </div>
        </div>
    </main>
</PortalLayout>
